#ifndef CONFIG_H
#define CONFIG_H

#include <Arduino.h>

// =================================================================
// =================== 全局配置 (Global Settings) ==================
// =================================================================

// 串行监视器波特率
#define SERIAL_BAUD_RATE 115200

// WiFi凭证 (如果需要连接网络，请替换)
#define WIFI_SSID "YOUR_WIFI_SSID"
#define WIFI_PASSWORD "YOUR_WIFI_PASSWORD"


// =================================================================
// ===================== 引脚定义 (Pin Definitions) ==================
// =================================================================

/*
 * 核心测量链路 (根据原理图)
 */
// 光激发模块: 控制LED驱动MOSFET的引脚
#define PIN_LED_CTRL 32
// 同步解调模块: 为模拟开关提供参考信号的引脚
#define PIN_DEMOD_REF 25
// 信号读取: ADC输入引脚，用于读取最终处理后的信号
#define PIN_ADC_IN 39  // ADC1_CH3 on ESP32

/*
 * I2C总线 (用于传感器)
 */
#define PIN_I2C_SDA 21
#define PIN_I2C_SCL 22

/*
 * 辅助传感器 (根据您的修正)
 */
// DHT22 温湿度传感器 - 使用单总线协议
// 注意: 您未指定此引脚，此处选择 GPIO27 作为默认值。
// 如果您连接到其他引脚，请修改此处。
#define PIN_DHT22_DATA 27

// MAX30102 心率血氧传感器
// 该传感器使用上面定义的I2C总线。
// 中断引脚(INT)是可选的，但推荐使用以实现高效的事件驱动读数。
// 注意: 您未指定中断引脚，此处选择 GPIO4 作为默认值。
#define PIN_MAX30102_INT 4


// =================================================================
// =================== 模块配置 (Module Configuration) ===============
// =================================================================

/*
 * I2C 总线配置
 */
// I2C时钟频率。MAX30102 推荐使用 400kHz。
#define I2C_CLOCK_SPEED 400000UL

/*
 * 光学测量配置 (光激发 & 解调)
 */
// LED脉冲和解调参考信号的频率 (Hz)。
// 这个频率需要仔细选择以避开工频(50/60Hz)等噪声源。
#define OPTICAL_SIGNAL_FREQ_HZ 410
// LED脉冲的PWM占空比 (0-255)。128 对应 50%。
#define LED_PULSE_DUTY_CYCLE 128

/*
 * ADC 读取配置
 */
// 为获得一次稳定读数而进行的ADC采样平均次数
#define ADC_SAMPLES_TO_AVERAGE 64
// ADC衰减配置。运放输出范围为0-3.3V，因此11dB衰减是合适的。
// 这使得ADC的测量范围约为 0V - 3.3V。
#define ADC_ATTENUATION ADC_ATTEN_DB_11


// =================================================================
// ================ 核心算法与校准参数 (Core & Calibration) ==============
// =================================================================
/*
 * 注意: 以下均为占位符参数。
 * 您需要通过对设备的实际测试和校准来确定这些真实数值。
 */

// 示例: 线性校准模型 y = (adc_raw_value * SLOPE) + OFFSET
// #define CALIBRATION_SLOPE 0.123
// #define CALIBRATION_OFFSET -45.6

// 示例: 温度补偿系数 (单位: 测量单位 / 摄氏度)
// #define TEMP_COMPENSATION_COEFFICIENT -0.05


#endif // CONFIG_H